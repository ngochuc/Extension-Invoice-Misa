<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Tạo hóa đơn MISA</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <h3>Tạo hóa đơn MISA</h3>
  
  <div class="form-group">
    <label for="token">
      Access Token:
      <span class="saved-indicator" id="tokenSaved" style="display: none;">✓ Đã lưu</span>
    </label>
    <textarea id="token" placeholder="Nhập Bearer token từ MISA..."></textarea>
    <div class="info">Lấy từ DevTools → Network → Authorization header</div>
  </div>
  
  <div class="form-group">
    <label for="context">
      X-MISA-Context:
      <span class="saved-indicator" id="contextSaved" style="display: none;">✓ Đã lưu</span>
    </label>
    <input type="text" id="context" placeholder="Nhập x-misa-context...">
    <div class="info">Lấy từ DevTools → Network → x-misa-context header</div>
  </div>

  <div class="form-group">
    <label for="invoiceIds">
      Danh sách Invoice IDs:
    </label>
    <textarea id="invoiceIds" placeholder="Nhập các invoice ID, mỗi ID một dòng&#10;Ví dụ:&#10;5543&#10;5544&#10;5545"></textarea>
    <div class="info">Mỗi invoice ID một dòng. Sẽ xử lý tuần tự với delay 2-3 giây</div>
  </div>

  <div class="form-group">
    <label for="delay">
      Delay giữa các request (giây):
    </label>
    <input type="number" id="delay" value="3" min="1" max="10">
    <div class="info">Thời gian chờ giữa mỗi hóa đơn để tránh bị chặn</div>
  </div>
  
  <button id="send">Tạo hóa đơn</button>
  
  <div id="progress" class="progress" style="display: none;">
    <div class="progress-text">
      <span id="progressText">Đang xử lý...</span>
    </div>
    <div class="progress-bar">
      <div id="progressFill" class="progress-fill"></div>
    </div>
    <div class="progress-details" id="progressDetails"></div>
  </div>
  
  <div id="status" class="status"></div>

  <script src="popup.js"></script>
</body>
</html>
